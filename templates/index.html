{% extends "base.html" %}

{% block title %}ğŸ“ Apply for Student ID{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="text-center fw-bold text-primary"><i class="fas fa-id-card"></i> Student ID Application</h2>

    <!-- ğŸ“Œ Student Registration Form -->
    <div class="card shadow-lg p-4 mt-4">
        <h4 class="fw-bold">ğŸ“‹ Student Details</h4>
        <form id="studentForm" enctype="multipart/form-data">
            <div class="mb-3">
                <label class="form-label">ğŸ‘¤ Full Name:</label>
                <input type="text" name="name" class="form-control" required>
            </div>
            <div class="mb-3">
                <label class="form-label">ğŸ†” Student ID:</label>
                <input type="text" name="student_id" class="form-control" required>
            </div>
            <div class="mb-3">
                <label class="form-label">âœ‰ï¸ Email:</label>
                <input type="email" name="email" class="form-control" required>
            </div>
            <div class="mb-3">
                <label class="form-label">ğŸ“ Phone:</label>
                <input type="text" name="phone" class="form-control" required>
            </div>
            <div class="mb-3">
                <label class="form-label">ğŸ« Department:</label>
                <input type="text" name="department" class="form-control" required>
            </div>
            <div class="mb-3">
                <label class="form-label">ğŸ“– Course:</label>
                <input type="text" name="course" class="form-control" required>
            </div>
            <div class="mb-3">
                <label class="form-label">ğŸ“ Year Level:</label>
                <select name="year_level" class="form-control" required>
                    <option value="1">1st Year</option>
                    <option value="2">2nd Year</option>
                    <option value="3">3rd Year</option>
                    <option value="4">4th Year</option>
                </select>
            </div>

            <!-- ğŸ“¸ Upload Profile Picture -->
            <div class="mb-3">
                <label class="form-label">ğŸ“¸ Upload Profile Picture:</label>
                <input type="file" name="profile_picture" class="form-control" accept="image/*" required>
            </div>

            <!-- ğŸ–Š Upload Signature -->
            <div class="mb-3">
                <label class="form-label">ğŸ–Š Upload Signature:</label>
                <input type="file" name="signature" class="form-control" accept="image/*" required>
            </div>

            <button type="submit" class="btn btn-primary w-100">ğŸ“© Submit Application</button>
        </form>
    </div>
</div>

<!-- âœ… JavaScript for Handling Form Submission -->
<script>
    document.getElementById("studentForm").onsubmit = async function(event) {
        event.preventDefault();
        
        let formData = new FormData(document.getElementById("studentForm"));

        let response = await fetch("/apply_student_id", {
            method: "POST",
            body: formData
        });

        let result = await response.json();
        if (result.success) {
            alert("âœ… Student ID Application Submitted Successfully!");
            window.location.href = "/student_dashboard";
        } else {
            alert("âŒ Error: " + result.error);
        }
    };
</script>

{% endblock %}
